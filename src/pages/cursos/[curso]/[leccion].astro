---
import LayoutStudents from "@pages/dashboard/_LayoutStudents.astro";
import VideoPlayer from "@shared/components/embed/VideoPlayer.astro";
const { leccion } = Astro.params;

import sampleData from "./lessonsSampleData.json";
import LessonAccordion from "./_components/LessonAccordion.astro";

interface Lessons {
  [key:string]: Lesson[]
}

type Lesson = {
  slug: string;
  title: string;
  progress: number;
}
const lessonData = sampleData as Lessons;

---

<LayoutStudents>
  <section class="lesson">
    <VideoPlayer
      width="100%"
      height="auto"
      class="lesson-video" 
      src={`/videos/video.mp4`}>
    </VideoPlayer>
    <div class="lesson-content">
      <h1 class="lesson-title">Leccion {leccion} </h1>
      <p class="lesson-description">Esta es una descripción de ejemplo para la lección. Aquí puedes agregar contenido detallado sobre el tema, incluyendo instrucciones, objetivos de aprendizaje y cualquier información adicional relevante para los estudiantes.</p>
    </div>
    </section>
  <aside slot="sidebar-right" class="sidebar-resources">
    {Object.keys(lessonData).map((section: string)=>(
      <LessonAccordion sectionTitle={section}  lessonList={lessonData[section]}/>
    ) )}

  </aside>
</LayoutStudents>

<style is:global>
  :root {
    --sidebar-min-width: 40rem;
    --sidebar-padding: 2rem;
  }
</style>

<style is:inline>
main{
  padding-bottom: 0;
}
.lesson{
  width: 100%;
  display: flex;
  flex-direction: column;
  align-items: center;
  gap: 3rem;
}

.sidebar-resources {
    min-width: var(--sidebar-min-width);
    grid-area: sidebar-right;
    display: flex;
    flex-direction: column;
    min-height: 100dvh;
    background-color: var(--bg-color);
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
    border-left: 1px solid #e6e0ee14;ß
}
.lesson-content{
  width: 100%;
  max-width:1080px;
  align-self:start;
}
.lesson-title{
  color: var(--accent-color);
  margin-bottom: 2rem;
}
.lesson-description{

}
</style>
